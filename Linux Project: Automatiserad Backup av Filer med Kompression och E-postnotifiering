Linux Project: Automatiserad Backup av Filer med Kompression och E-postnotifiering

Projektm친l: Automatisera s칛kerhetskopiering av viktiga filer p친 en server. Denna s칛kerhetskopia ska komprimeras f칬r att spara utrymme, lagras p친 en annan plats, och en e-postnotifiering ska skickas efter att s칛kerhetskopian 칛r klar.



游댮Steg-f칬r-steg: Automatiserad Backup med Linux Bash-skript
H칛r f칬ljer en steg-f칬r-steg guide f칬r att skapa en s칛kerhetskopieringsl칬sning med komprimering och e-postnotifiering i Linux.

Steg 1: Installera n칬dv칛ndiga verktyg
F칬r att s칛kerst칛lla att alla n칬dv칛ndiga verktyg finns installerade:
칐ppna terminalen.
K칬r f칬ljande kommandon f칬r att installera tar, gzip, och mailutils om de inte redan 칛r installerade:

sudo apt update
sudo apt install tar gzip mailutils


tar: F칬r att skapa en arkivfil.
gzip: F칬r att komprimera backupen.
mailutils: F칬r att skicka notifieringar via e-post.







Steg 2: Skapa kataloger
Best칛m var dina s칛kerhetskopior ska sparas och skapa n칬dv칛ndiga kataloger. I detta exempel kommer s칛kerhetskopian att sparas i katalogen ~/root/technical_mindset/backups.
K칬r f칬ljande kommando f칬r att skapa en backup-katalog:

mkdir -p ~/technical_mindset/backups

Steg 3: Skriv bash-skriptet
Nu ska du skapa ett bash-skript som utf칬r s칛kerhetskopieringen och skickar e-postnotifieringar. Vi kommer att s칛kerhetskopiera 1 katalog: /etc.
Skapa ett nytt skript, t.ex. backup.sh:

#!/bin/bash

# Ange k칛llkatalogerna som ska s칛kerhetskopieras
SOURCE_DIRECTORIES="/etc"

# Ange backup-katalogen
BACKUP_DIRECTORY="/root/technical_mindset/backups"

# Skapa ett filnamn med dagens datum
DATE=$(date +"%Y%m%d")

BACKUP_FILE="$BACKUP_DIRECTORY/backup_$DATE.tar.gz"

# Debug-utskrift
echo "Creating backup file at: $BACKUP_FILE"
echo "Backing up directories: $SOURCE_DIRECTORIES"

# Skapa en s칛kerhetskopia med tar och komprimera med gzip
tar -czf $BACKUP_FILE $SOURCE_DIRECTORIES 2>> error_log.txt

# Kontrollera om backupen lyckades
if [ $? -eq 0 ]; then
    # Skicka ett e-postmeddelande om lyckad s칛kerhetskopia
    echo "Backup completed successfully on $(date)" | mail -s "Backup Success" hello.technicalmindset@gmail.com
else
    # Skicka ett e-postmeddelande om backupen misslyckades


Spara filen och avsluta genom att trycka p친 CTRL + X, sedan Y och Enter.

Steg 4: G칬r skriptet exekverbart
F칬r att kunna k칬ra skriptet m친ste du g칬ra det exekverbart.
K칬r detta kommando:

chmod +x ~/root/technical_mindset/backup.sh



Steg 5: Testa skriptet
Innan du schemal칛gger skriptet, testa det manuellt f칬r att se till att det fungerar korrekt.

Kopiera kod
~/root/Technical_mindset/backup.sh

Kolla om filen skapades i backup-katalogen:

ls ~/root/Technical_mindset/backups

Om backupen lyckades, kontrollera om du har f친tt ett e-postmeddelande. Om det inte fungerar, kan du testa med en enklare notifiering:

echo "Testmeddelande" | mail -s "Test" user@example.com



Steg 6: Automatisera med Cron
F칬r att automatisera s칛kerhetskopieringen kan du schemal칛gga skriptet att k칬ras automatiskt varje dag med hj칛lp av cron.
칐ppna crontab f칬r att redigera schemal칛ggningar:

crontab -e

L칛gg till f칬ljande rad f칬r att k칬ra s칛kerhetskopian varje dag kl. 2 p친 morgonen:

21 * * * ~/root/Technical_mindset/backup.sh
Spara och st칛ng crontab.

Steg 7: Kontrollera Cron-jobben
F칬r att se till att cron-jobbet k칬rs korrekt kan du kontrollera statusen med f칬ljande kommando:
crontab -l



Real World Application
Detta projekt kan anv칛ndas f칬r att regelbundet s칛kerhetskopiera viktiga filer p친 en server och f친 notifieringar om backupen lyckades. Det 칛r ett praktiskt s칛tt att skydda data p친 och s칛kerst칛lla kontinuerlig drift i verkliga systemadministrationsmilj칬er.
